Lo primero que haremos será conectarnos a la maquina mediante vpn para ello haremos el siguiente comando: sudo openvpn alvarobuenoo\ \(1\).ovpn

Una vez hecho esto, haremos un nmap para ver los servicios y puertos abiertos con: sudo nmap -Pn -A -p- -T4 10.10.196.82

Y vemos que tiene en el puerto 22 ssh, también tiene samba en el puerto 139 y 445, y en el puerto 80 hay una pagina web de apache corriendo, 

Ahora vamos a hacerle fuzzing con el comando: gobuster dir -u http://10.10.172.190 -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt

[img](img/img01.png)

Y podremos ver que hay un directorio oculto que se llama /development , donde hay dos ficheros de texto.

A continuación ejecutaremos el siguiente comando: enum4linux -a 10.10.196.82 para poder hacer una enumeración del SMB y de usuarios y veremos que hay dos usuarios que se llaman kay y jan.

[img](img/img02.png)

Ahora probaremos a hacer fuerza bruta a ssh con el siguiente comando y sabiendo que uno de los usuarios es kay y otro jan: hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.196.82

[img](img/img03.png)

Y sacamos la contraseña para poder acceder por ssh.

Ahora entramos en el ssh con shh jan@10.10.196.82 y nos meteremos en /home/kay/.ssh y hacemos un cat id_rsa y sacaremos su clave, y ahora nos la copiamos en un fichero.

[img](img/img04.png)

Una vez metida en un fichero en el escritorio, haremos los siguientes comandos para hashearla y luego intentar crackearla con los siguientes comandos:

python /usr/share/john/ssh2john.py id_rsa > id_rsa.hash

sudo /usr/sbin/john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash

[img](img/img05.png)

Y sacamos una contraseña, ahora vamos al ssh de jan y ponemos lo siguiente:

ssh -i /home/kay/.ssh/id_rsa kay@10.10.172.190 

[img](img/img06.png)

Ahora ya tenemos la contraseña del usuario kay:

[img](img/img07.png)

Y con sudo -l tenemos acceso como root, hacemos un sudo su y ya tenemos root.

Y ya tenemos acceso a la ultima flag:

[img](img/img08.png)









